void angle()
{
float flat1= Currentlatitude; // obtains current latitude
float flon1= Currentlongitude; // obtains current longitude
float x2lat=latdArray[ArrayCounter]; // obtains target latitude from Array of waypoints  
float x2lon=longArray[ArrayCounter]; // obtains target longitude from Array of waypoints   
float heading; 

flon1 = radians(flon1);  //Formula only works in radians
x2lon = radians(x2lon);  //Formula only works in radians

heading = atan2(sin(x2lon-flon1)*cos(x2lat),cos(flat1)*sin(x2lat)-sin(flat1)*cos(x2lat)*cos(x2lon-flon1)),2*3.1415926535; //formula for finding angle between two points on a sphere

heading = heading*180/3.1415926535;  // convert from radians to degrees
heading = abs(heading); // Absolutes the negative readings which sometimes happen

Serial.println("heading:");
Serial.println(heading);   // print the heading
}
