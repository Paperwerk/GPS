void distance(TinyGPS &gps)
{
float latitude, longitude; 
gps.f_get_position(&latitude, &longitude); //From the TinyGPS external library

Serial.print("Lat/Long: "); 
Serial.print(latitude,5); 
Serial.print(", "); 
Serial.println(longitude,5);

Currentlatitude= latitude; //Obtains current latitude from TinyGS
Currentlongitude= longitude; //Obtains current longitude from TinyGS
float flat1= Currentlatitude; 
float flon1= Currentlongitude;
float dist_calc=0;
float dist_calc2=0;
float diflat=0;
float diflon=0;
float x2lat=latdArray[ArrayCounter]; //Obtains destination latitude 
float x2lon=longArray[ArrayCounter]; //Obtains destination longitude


diflat=radians(x2lat-flat1);  //Converts difference in latitude to radians
flat1=radians(flat1);    //Convert current latitude to radians
x2lat=radians(x2lat);  //Convert waypoint latitude to radians
diflon=radians((x2lon)-(flon1));   //Converts difference in longitudes to radians

dist_calc = (sin(diflat/2.0)*sin(diflat/2.0)); //Forumla for calculating distance between two points on a sphere
dist_calc2= cos(flat1);
dist_calc2*=cos(x2lat);
dist_calc2*=sin(diflon/2.0);                                       
dist_calc2*=sin(diflon/2.0);
dist_calc +=dist_calc2;
dist_calc=(2*atan2(sqrt(dist_calc),sqrt(1.0-dist_calc)));
dist_calc*=6371000.0; //6371 is the widely accepted mean radius of the Earth 

Serial.println("distance:");
Serial.println(dist_calc);    //print the distance in meters
}
